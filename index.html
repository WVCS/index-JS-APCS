<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" type="text/css" href="styles/desk.css">
  <link rel="icon" href="images/desktop_imgs/windows-4.png">
  <title>Windows 98</title>
</head>
<body onload="startTime()">
  
  <div ID="desktop">
    <li>
      <div class="desk_icon">
        <img src="images/desktop_imgs/recycle_bin_empty-2.png">
        Recycle
      </div>
        </li>
    
    <li>
      <div class="desk_icon">
        <img src="images/desktop_imgs/computer_explorer-2.png">
        Computer
      </div>
        </li>
    
    <li>
      <div class="desk_icon">
        <img src="images/desktop_imgs/directory_closed-3.png">
        Documents
      </div>
        </li>
    
    <li>
      <div class="desk_icon">
        <img src="images/desktop_imgs/msie1-1.png">
        Internet Explorer
      </div>
        </li>
  </div>
  
  <!-- Main Window -->
  <div ID="main" class="window">
    <div class="header"> My Desktop
      <img src="images/desktop_imgs/close-icon.png" style="background-color: #c6c6c6; padding: 0.5px; border-style: outset;
  border-color: #efefef black black #efefef; border-width: 2px; float: right;">
      <img src="images/desktop_imgs/question-icon.png" style="background-color: #c6c6c6; padding: 0.5px; border-style: outset;
  border-color: #efefef black black #efefef; border-width: 2px; float: right; margin-right: 5px;">
    </div>
    
    <div class="container">
      <!-- "Applications" -->
      <li><a href="event/index.html">
      <div class="icon">
        <img src="images/desktop_imgs/world-3.png">
        The Drop
      </div>
        </a>
        </li>
        
      <li><a href="restaurant.html">
        <div class="icon">
        <img src="images/desktop_imgs/tree-0.png">
          The Clubhouse
      </div>
        </a>
          </li>
          
          <li><a href="convince.html">
        <div class="icon">
        <img src="images/desktop_imgs/message_file-0.png">
          Mario.txt
      </div>
            </a>
          </li>
      
      <li><a href="noun_site.html">
        <div class="icon">
        <img src="images/desktop_imgs/msn3-5.png">
          Fruit.exe
      </div>
        </a>
          </li>
      
      <li><a href="group/group.html">
        <div class="icon">
        <img src="images/desktop_imgs/TB_icon.PNG">
          Toad.json
      </div>
            </a>
          </li>
      
      <li><a href="carnival/index.html">
        <div class="icon">
        <img src="images/desktop_imgs/message_file-0.png">
          Cuphead.exe
      </div>
            </a>
          </li>
      
      <li>
        <div ondblclick="openWindow('image_viewer'); setImage('https://axisstudiosgroup.com/site/assets/files/14132/sackboy_axis_012-1.-full.jpg')" class="image_file">
        <img src="images/desktop_imgs/kodak_imaging-0.png">
          Sackboy.png
      </div>
          </li>
      
      <li>
        <div ondblclick="openWindow('image_viewer'); setImage('https://nationaltoday.com/wp-content/uploads/2020/04/mario-day.jpg')" class="image_file">
        <img src="images/desktop_imgs/kodak_imaging-0.png">
          Mario_IRL.png
      </div>
      </li>
      
      <li>
        <div ondblclick="openWindow('song_player'); setSong('sounds/test_song.mp3', 'mp3')" class="image_file">
        <img src="images/desktop_imgs/cd_audio_cd_a-2.png">
          pizza.wav
      </div>
      </li>
      
      <li>
        <div ondblclick="openWindow('mario_game'); setGame('https://games.construct.net/769/latest')" class="image_file">
        <img src="images/desktop_imgs/mario_icon.png">
          Mario game
      </div>
      </li>
      
    </div>
    
  </div>
  
  <div ID="task">
    <div ID="start">
      <img src="images/desktop_imgs/windows-4.png" style="padding-right: 3px;">Start
    </div>
    <div ID="time" style="">
    </div>
  </div>
  
  <!-- Image Viewer -->
  <div ID="image_viewer" class="window">
    <div ID="image_name" class="header"> Image
      <img onclick="closeElmnt('image_viewer')" src="images/desktop_imgs/close-icon.png" style="background-color: #c6c6c6; padding: 0.5px; border-style: outset;
  border-color: #efefef black black #efefef; border-width: 2px; float: right;">
      <img src="images/desktop_imgs/question-icon.png" style="background-color: #c6c6c6; padding: 0.5px; border-style: outset;
  border-color: #efefef black black #efefef; border-width: 2px; float: right; margin-right: 5px;">
    </div>
    <div class="container">
      <img ID="picture" src="">
    </div>
  </div>
  
  <!-- Mario Game -->
  <div ID="mario_game" class="window">
    <div class="header"> Super Mario
      <img onclick="closeElmnt('mario_game')" src="images/desktop_imgs/close-icon.png" style="background-color: #c6c6c6; padding: 0.5px; border-style: outset;
  border-color: #efefef black black #efefef; border-width: 2px; float: right;">
      <img src="images/desktop_imgs/question-icon.png" style="background-color: #c6c6c6; padding: 0.5px; border-style: outset;
  border-color: #efefef black black #efefef; border-width: 2px; float: right; margin-right: 5px;">
    </div>
    <div class="container">
      <iframe ID="game" allow="fullscreen; autoplay; encrypted-media" src="" frameborder="0" allowfullscreen="true" msallowfullscreen="true" mozallowfullscreen="true" webkitallowfullscreen="true" allowpaymentrequest="false" referrerpolicy="unsafe-url" sandbox="allow-same-origin allow-forms allow-scripts allow-pointer-lock allow-orientation-lock allow-popups" scrolling="no"></iframe>
    </div>
  </div>
  
    <!-- Song Player -->
  <div ID="song_player" class="window">
    <div ID="song_name" class="header"> Media Player
      <img onclick="closeElmnt('song_player'); stopSong('song_controller')" src="images/desktop_imgs/close-icon.png" style="background-color: #c6c6c6; padding: 0.5px; border-style: outset;
  border-color: #efefef black black #efefef; border-width: 2px; float: right;">
      <img src="images/desktop_imgs/question-icon.png" style="background-color: #c6c6c6; padding: 0.5px; border-style: outset;
  border-color: #efefef black black #efefef; border-width: 2px; float: right; margin-right: 5px;">
    </div>
    <center>
    <div ID="media_player" class="container">
      
      <div style="background-color: #c6c6c6; margin: auto; padding-top: 10%; padding-bottom: 10%; margin-bottom: 5%; border-style: inset; border-color: black #efefef #efefef black;">
        
      <img ID="disc" src="http://www.clker.com/cliparts/e/v/U/O/p/i/cd-dvd-hi.png">
      </div>
      <div ID="progress">
        <div ID="bar"></div>
      </div>
      <div ID="buttons">
        <img ID="play" style="" width="46px" height="44px" onclick="toggleAudio('song_controller')">
        <img ID="stop" style="" width="46px" height="44px" onclick="stopSong('song_controller')">
        <img ID="restart" style="" width="46px" height="44px" onclick="document.getElementById('song_controller').currentTime = 0">
      </div>
      <audio ID="song_controller" style="padding-bottom: 10%;" ontimeupdate="updateBar()">
        <source ID="audio_source" src="" type="">
      </audio>
        </center>
    </div>
  </div>
</div>
  <script>
  //Double click file:
    
function openWindow(elmntID){
  document.getElementById(elmntID).style.opacity = 1;
  document.getElementById(elmntID).style.left = '0px';
}
    
function closeElmnt(elmntID) {
  document.getElementById(elmntID).style.opacity = 0;
  document.getElementById(elmntID).style.left = '-1000px';
}
    
function setImage(imageURL) {
  document.getElementById("picture").src = imageURL;
}
    
function setGame(gameURL) {
  var game = document.getElementById("game");
  game.src = gameURL;
}
    
function setSong(songURL, fileType) {
  var audio = document.getElementById("audio_source");
  audio.src = songURL;
  audio.type = 'audio/' + fileType;
  document.getElementById("song_controller").load();
}
    
  //play spin anim for CD
    document.getElementById("song_controller").addEventListener('play', function() {
      document.getElementById("disc").style.animationPlayState = 'running';
    });
    
    document.getElementById("song_controller").addEventListener('pause', function() {
      document.getElementById("disc").style.animationPlayState = 'paused';
    });
    
  //toggle play pause
  function toggleAudio(element){
    var song = document.getElementById(element);
    if (song.paused == true) {
      song.play();
      document.getElementById("play").style.backgroundColor = "green";
    } else {
      song.pause();
      document.getElementById("play").style.backgroundColor = "blue";
    }
  }
    
  //start stop and pause song
  function stopSong(element) {
    document.getElementById(element).pause();
    document.getElementById(element).currentTime = 0;
  }
    
  //song progress bar
  var audio = document.getElementById("song_controller")
  function updateBar() {
    var prog = 100*(audio.currentTime/audio.duration);
    document.getElementById("bar").style.width = prog + '%';
  }
  
  // Make the DIV element draggable:
dragElement(document.getElementById("main"));
dragElement(document.getElementById("image_viewer"));
dragElement(document.getElementById("song_player"));
dragElement(document.getElementById("mario_game"));

function dragElement(elmnt) {
  var pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
  if (document.getElementById(elmnt.id + "header")) {
    // if present, the header is where you move the DIV from:
    document.getElementById(elmnt.id + "header").onmousedown = dragMouseDown;
  } else {
    // otherwise, move the DIV from anywhere inside the DIV:
    elmnt.onmousedown = dragMouseDown;
  }

  function dragMouseDown(e) {
    e = e || window.event;
    e.preventDefault();
    // get the mouse cursor position at startup:
    pos3 = e.clientX;
    pos4 = e.clientY;
    document.onmouseup = closeDragElement;
    // call a function whenever the cursor moves:
    document.onmousemove = elementDrag;
  }

  function elementDrag(e) {
    e = e || window.event;
    e.preventDefault();
    // calculate the new cursor position:
    pos1 = pos3 - e.clientX;
    pos2 = pos4 - e.clientY;
    pos3 = e.clientX;
    pos4 = e.clientY;
    // set the element's new position:
    elmnt.style.top = (elmnt.offsetTop - pos2) + "px";
    elmnt.style.left = (elmnt.offsetLeft - pos1) + "px";
  }

  function closeDragElement() {
    // stop moving when mouse button is released:
    document.onmouseup = null;
    document.onmousemove = null;
  }
}
    
function startTime() {
  const today = new Date();
  let h = today.getHours();
  let m = today.getMinutes();
  let s = today.getSeconds();
  let meridian = getMeridian(h);
  m = checkTime(m);
  s = checkTime(s);
  document.getElementById('time').innerHTML =  getDisplayedHour(h) + ":" + m + " " + meridian;
  setTimeout(startTime, 1000);
}

function getDisplayedHour(hour) {
  if (hour > 12) {
    return hour - 12;
  }else {
    return hour;
  }
}
    
function getMeridian(hour) {
  if (hour > 12) {
    return 'PM';
  }else {
    return 'AM';
  }
}

function checkTime(i) {
  if (i < 10) {i = "0" + i};  // add zero in front of numbers < 10
  return i;
}
  </script>
</body>
</html>
